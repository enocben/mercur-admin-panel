import { Divider, Heading } from "@medusajs/ui";

import type { UseFormReturn } from "react-hook-form";
import { useTranslation } from "react-i18next";

import { ProductCreateGeneralSection } from "@routes/products/product-create/components/product-create-details-form/components/product-create-details-general-section";
import { ProductCreateMediaSection } from "@routes/products/product-create/components/product-create-details-form/components/product-create-details-media-section";
import { ProductCreateVariantsSection } from "@routes/products/product-create/components/product-create-details-form/components/product-create-details-variant-section";
import type { ProductCreateSchemaType } from "@routes/products/product-create/types";

import { useExtension } from "@providers/extension-provider";

import { FormExtensionZone } from "@/dashboard-app";

type ProductAttributesProps = {
  form: UseFormReturn<ProductCreateSchemaType>;
};

export const ProductCreateDetailsForm = ({ form }: ProductAttributesProps) => {
  const { getFormFields } = useExtension();
  const fields = getFormFields("product", "create", "general");

  return (
    <div className="flex flex-col items-center p-16">
      <div className="flex w-full max-w-[720px] flex-col gap-y-8">
        <Header />
        <div className="flex flex-col gap-y-6">
          <ProductCreateGeneralSection form={form} />
          <FormExtensionZone fields={fields} form={form} />
          <ProductCreateMediaSection form={form} />
        </div>
        <Divider />
        <ProductCreateVariantsSection form={form} />
      </div>
    </div>
  );
};

const Header = () => {
  const { t } = useTranslation();

  return (
    <div className="flex flex-col">
      <Heading>{t("products.create.header")}</Heading>
    </div>
  );
};
